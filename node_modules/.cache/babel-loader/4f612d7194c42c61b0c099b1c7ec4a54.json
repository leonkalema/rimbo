{"ast":null,"code":"import _toConsumableArray from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kaliguy7/Dev/leo/src/components/MovieList.js\";\nimport React, { Component } from \"react\";\nimport \"../css/list.css\";\nimport { getMovies as _getMovies } from \"../actions\";\nimport ViewMovies from \"./ViewMovie\";\nimport { connect } from \"react-redux\";\n\nvar MovieList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieList, _Component);\n\n  function MovieList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MovieList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MovieList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      searchInfo: {},\n      page: 1,\n      onBOttom: false\n    };\n\n    _this.handleScroll = function () {\n      var windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      var body = document.body;\n      var html = document.documentElement;\n      var docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n      var windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n        _this.setState({\n          onBOttom: true\n        });\n      } else {\n        _this.setState({\n          onBOttom: false\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(MovieList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getMovies(this.state.page);\n      window.addEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.movies) {\n        this.setState({\n          movies: [].concat(_toConsumableArray(this.state.movies), _toConsumableArray(newProps.movies)),\n          page: this.state.page + 1,\n          onBOttom: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.onBOttom) {\n        this.props.getMovies(this.state.page);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var movies = this.state.movies;\n\n      if (this.props.movies.length === 0) {\n        return React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      return React.createElement(ViewMovies, {\n        movies: movies,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return MovieList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    movies: state.movies.movies,\n    page: null\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getMovies: function getMovies(page) {\n      return dispatch(_getMovies(page));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieList);","map":{"version":3,"sources":["/Users/kaliguy7/Dev/leo/src/components/MovieList.js"],"names":["React","Component","getMovies","ViewMovies","connect","MovieList","state","movies","searchInfo","page","onBOttom","handleScroll","windowHeight","window","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","setState","props","addEventListener","removeEventListener","newProps","length","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../css/list.css\";\nimport { getMovies } from \"../actions\";\nimport ViewMovies from \"./ViewMovie\";\n\nimport { connect } from \"react-redux\";\n\nclass MovieList extends Component {\n  state = {\n    movies: [],\n    searchInfo: {},\n    page: 1,\n    onBOttom: false\n  };\n  componentDidMount() {\n    this.props.getMovies(this.state.page);\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll = () => {\n    const windowHeight =\n      \"innerHeight\" in window\n        ? window.innerHeight\n        : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n    const windowBottom = windowHeight + window.pageYOffset;\n    if (windowBottom >= docHeight) {\n      this.setState({\n        onBOttom: true\n      });\n    } else {\n      this.setState({\n        onBOttom: false\n      });\n    }\n  };\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.movies) {\n      this.setState({\n        movies: [...this.state.movies, ...newProps.movies],\n        page: this.state.page + 1,\n        onBOttom: false\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.onBOttom) {\n      this.props.getMovies(this.state.page);\n    }\n  }\n\n  render() {\n    const { movies } = this.state;\n    if (this.props.movies.length === 0) {\n      return <h1>Loading...</h1>;\n    }\n\n    return <ViewMovies movies={movies} />;\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    movies: state.movies.movies,\n    page: null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getMovies: page => dispatch(getMovies(page))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MovieList);\n"]},"metadata":{},"sourceType":"module"}