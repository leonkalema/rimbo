{"ast":null,"code":"import _toConsumableArray from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kaliguy7/Dev/leo/src/components/MovieList.js\";\nimport React, { Component } from \"react\";\nimport { Row, Col, Button, CardColumns, Card } from \"react-bootstrap\";\nimport \"../css/list.css\";\nimport { getMovies as _getMovies } from \"../actions\";\nimport { addFavorites as _addFavorites, removeFavorites } from \"../actions/movieActions\";\nimport { connect } from \"react-redux\";\n\nvar MovieList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieList, _Component);\n\n  function MovieList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MovieList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MovieList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      searchInfo: {},\n      page: 1,\n      onBOttom: false\n    };\n\n    _this.handleScroll = function () {\n      var windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      var body = document.body;\n      var html = document.documentElement;\n      var docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n      var windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n        _this.setState({\n          onBOttom: true\n        });\n      } else {\n        _this.setState({\n          onBOttom: false\n        });\n      }\n    };\n\n    _this.setItem = function (movie) {\n      var getItem = localStorage.getItem('favourite');\n\n      if (getItem) {\n        var cloneArr = JSON.parse(getItem);\n        cloneArr.push(movie);\n        if (movie) localStorage.setItem('favourite', JSON.stringify(cloneArr));\n\n        _this.forceUpdate();\n      } else {\n        var arr = [movie];\n        localStorage.setItem('favourite', JSON.stringify(arr));\n\n        _this.forceUpdate();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(MovieList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getMovies(this.state.page);\n      window.addEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.movies) {\n        this.setState({\n          movies: [].concat(_toConsumableArray(this.state.movies), _toConsumableArray(newProps.movies)),\n          page: this.state.page + 1,\n          onBOttom: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.onBOttom) {\n        this.props.getMovies(this.state.page);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          movies = _this$state.movies,\n          page = _this$state.page,\n          searchInfo = _this$state.searchInfo;\n\n      if (this.props.movies.length === 0) {\n        return React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      return React.createElement(CardColumns, {\n        id: \"card-columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, movies.map(function (movie, index) {\n        var isFavor = JSON.parse(localStorage.getItem('favourite')) ? JSON.parse(localStorage.getItem('favourite')).find(function (arr) {\n          return arr.id === movie.id;\n        }) : false;\n        console.log(isFavor, \"lalalal\");\n        return React.createElement(Card, {\n          key: movie.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(Card.Img, {\n          variant: \"top\",\n          src: \"https://image.tmdb.org/t/p/w185\".concat(movie.backdrop_path),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }), React.createElement(Card.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, movie.name), React.createElement(\"h6\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, movie.vote_average || \"No Rating\", \" \")), React.createElement(Card.Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, movie.overview)), React.createElement(Card.Footer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(Col, {\n          sm: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this2.setItem(!isFavor ? movie : false);\n          },\n          variant: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: isFavor ? \"glyphicon glyphicon-heart-empty\" : \"glyphicon glyphicon-heart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }))), React.createElement(Col, {\n          sm: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }), React.createElement(Col, {\n          sm: true,\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"glyphicon glyphicon-plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }))))));\n      }));\n    }\n  }]);\n\n  return MovieList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    movies: state.movies.movies,\n    page: null\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getMovies: function getMovies(page) {\n      return dispatch(_getMovies(page));\n    },\n    addFavorites: function addFavorites(id) {\n      return dispatch(_addFavorites(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieList);","map":{"version":3,"sources":["/Users/kaliguy7/Dev/leo/src/components/MovieList.js"],"names":["React","Component","Row","Col","Button","CardColumns","Card","getMovies","addFavorites","removeFavorites","connect","MovieList","state","movies","searchInfo","page","onBOttom","handleScroll","windowHeight","window","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","setState","setItem","movie","getItem","localStorage","cloneArr","JSON","parse","push","stringify","forceUpdate","arr","props","addEventListener","removeEventListener","newProps","length","map","index","isFavor","find","id","console","log","backdrop_path","name","vote_average","overview","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Row, Col, Button, CardColumns, Card } from \"react-bootstrap\";\nimport \"../css/list.css\";\nimport { getMovies } from \"../actions\";\nimport { addFavorites, removeFavorites } from \"../actions/movieActions\";\n\nimport { connect } from \"react-redux\";\n\nclass MovieList extends Component {\n  state = {\n    movies: [],\n    searchInfo: {},\n    page: 1,\n    onBOttom: false\n  };\n  componentDidMount() {\n    this.props.getMovies(this.state.page);\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll = () => {\n    const windowHeight =\n      \"innerHeight\" in window\n        ? window.innerHeight\n        : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n    const windowBottom = windowHeight + window.pageYOffset;\n    if (windowBottom >= docHeight) {\n      this.setState({\n        onBOttom: true\n      });\n    } else {\n      this.setState({\n        onBOttom: false\n      });\n    }\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.movies) {\n      this.setState({\n        movies: [...this.state.movies, ...newProps.movies],\n        page: this.state.page + 1,\n        onBOttom: false\n      });\n    }\n  }\n\n  componentDidUpdate(){\n    if(this.state.onBOttom){\n      this.props.getMovies(this.state.page);\n    } \n  }\n\n  setItem = (movie) => {\n    let getItem = localStorage.getItem('favourite');\n    if(getItem){\n      let cloneArr = JSON.parse(getItem);\n      cloneArr.push(movie);\n      if(movie)\n      localStorage.setItem('favourite',JSON.stringify(cloneArr))\n      this.forceUpdate();\n    }\n    else{\n      let arr = [movie];\n      localStorage.setItem('favourite',JSON.stringify(arr));\n      this.forceUpdate();\n    }\n  }\n  render() {\n    const { movies, page, searchInfo } = this.state;\n   \n    if (this.props.movies.length === 0) {\n      return <h1>Loading...</h1>;\n    }\n\n    return (\n      <CardColumns id=\"card-columns\">\n        {movies.map((movie,index) => {\n          const isFavor = JSON.parse(localStorage.getItem('favourite'))? JSON.parse(localStorage.getItem('favourite')).find(arr => arr.id === movie.id): false\n          console.log(isFavor,\"lalalal\")\n          return (\n            <Card key={movie.id}>\n            <Card.Img\n              variant=\"top\"\n              src={`https://image.tmdb.org/t/p/w185${movie.backdrop_path}`}\n            />\n            <Card.Body>\n              <Card.Title>\n                <h4>{movie.name}</h4>\n                <h6>{movie.vote_average || \"No Rating\"} </h6>\n              </Card.Title>\n              <Card.Text>{movie.overview}</Card.Text>\n            </Card.Body>\n            <Card.Footer>\n              <Row>\n                <Col sm>\n                  <Button onClick={() => this.setItem(!isFavor?movie:false)} variant=\"danger\">\n                    <span className={isFavor ? \"glyphicon glyphicon-heart-empty\": \"glyphicon glyphicon-heart\"} />\n                  </Button>\n                </Col>\n                <Col sm />\n                <Col sm align=\"right\">\n                  <Button variant=\"danger\">\n                    <span className=\"glyphicon glyphicon-plus\" />\n                  </Button>\n                </Col>\n              </Row>\n            </Card.Footer>\n          </Card>\n          )\n        }\n          \n        )}\n      </CardColumns>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    movies: state.movies.movies,\n    page: null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getMovies: page => dispatch(getMovies(page)),\n    addFavorites: id => dispatch(addFavorites(id))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MovieList);\n"]},"metadata":{},"sourceType":"module"}