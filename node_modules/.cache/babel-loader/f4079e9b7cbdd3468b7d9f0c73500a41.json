{"ast":null,"code":"import _toConsumableArray from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kaliguy7/Dev/leo/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kaliguy7/Dev/leo/src/components/MovieList.js\";\nimport React, { Component } from \"react\";\nimport { Row, Col, Button, CardColumns, Card } from \"react-bootstrap\";\nimport \"../css/list.css\";\nimport { getMovies as _getMovies } from \"../actions\";\nimport { addFavorites as _addFavorites, removeFavorites } from \"../actions/movieActions\";\nimport { connect } from \"react-redux\";\n\nvar MovieList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MovieList, _Component);\n\n  function MovieList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MovieList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MovieList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      movies: [],\n      searchInfo: {},\n      page: 1,\n      onBOttom: false\n    };\n\n    _this.handleScroll = function () {\n      var windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      var body = document.body;\n      var html = document.documentElement;\n      var docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);\n      var windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n        _this.setState({\n          onBOttom: true\n        });\n      } else {\n        _this.setState({\n          onBOttom: false\n        });\n      }\n    };\n\n    _this.setItem = function (movie) {\n      console.log(movie, '*******');\n      var getItem = localStorage.getItem('favourite');\n\n      if (getItem) {\n        var cloneArr = JSON.parse(getItem);\n\n        if (movie && movie.name) {\n          cloneArr.push(movie);\n          localStorage.setItem('favourite', JSON.stringify(cloneArr));\n\n          _this.forceUpdate();\n        } else {\n          // let arr = [];\n          cloneArr.map(function (item, index) {\n            if (item.id === movie) {\n              cloneArr.splice(index, 1);\n              localStorage.setItem('favourite', JSON.stringify(cloneArr));\n\n              _this.forceUpdate();\n            }\n          });\n        }\n      } else {\n        var arr = [movie];\n        localStorage.setItem('favourite', JSON.stringify(arr));\n\n        _this.forceUpdate();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(MovieList, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getMovies(this.state.page);\n      window.addEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (newProps.movies) {\n        this.setState({\n          movies: [].concat(_toConsumableArray(this.state.movies), _toConsumableArray(newProps.movies)),\n          page: this.state.page + 1,\n          onBOttom: false\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.state.onBOttom) {\n        this.props.getMovies(this.state.page);\n      }\n    }\n  }, {\n    key: \"add\",\n    value: function add(movie) {\n      var _this2 = this;\n\n      var getItem = localStorage.getItem('AddLike');\n\n      if (getItem) {\n        var cloneArr = JSON.parse(getItem);\n\n        if (movie && movie.name) {\n          cloneArr.push(movie);\n          localStorage.setItem('AddLike', JSON.stringify(cloneArr));\n          this.forceUpdate();\n        } else {\n          cloneArr.map(function (item, index) {\n            if (item.id === movie) {\n              cloneArr.splice(index, 1);\n              localStorage.setItem('AddLike', JSON.stringify(cloneArr));\n\n              _this2.forceUpdate();\n            }\n          });\n        }\n      } else {\n        var arr = [movie];\n        localStorage.setItem('AddLike', JSON.stringify(arr));\n        this.forceUpdate();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          movies = _this$state.movies,\n          page = _this$state.page,\n          searchInfo = _this$state.searchInfo;\n      console.log(this.state);\n\n      if (this.props.movies.length === 0) {\n        return React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \"Loading...\");\n      }\n\n      return React.createElement(CardColumns, {\n        id: \"card-columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, movies.map(function (movie, index) {\n        var isFavor = JSON.parse(localStorage.getItem('favourite')) ? JSON.parse(localStorage.getItem('favourite')).find(function (arr) {\n          return arr.id === movie.id;\n        }) : false;\n        var isLike = JSON.parse(localStorage.getItem('AddLike')) ? JSON.parse(localStorage.getItem('AddLike')).find(function (arr) {\n          return arr.id === movie.id;\n        }) : false; // console.log(isFavor,\"lalalal\")\n\n        return React.createElement(Card, {\n          key: movie.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(Card.Img, {\n          variant: \"top\",\n          src: \"https://image.tmdb.org/t/p/w185\".concat(movie.backdrop_path),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }), React.createElement(Card.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, React.createElement(Card.Title, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, React.createElement(\"h4\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, movie.name), React.createElement(\"h6\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, movie.vote_average || \"No Rating\", \" \")), React.createElement(Card.Text, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, movie.overview)), React.createElement(Card.Footer, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(Col, {\n          sm: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this3.setItem(!isFavor ? movie : movie.id);\n          },\n          variant: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: isFavor ? \"glyphicon glyphicon-heart-empty\" : \"glyphicon glyphicon-heart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }))), React.createElement(Col, {\n          sm: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }), React.createElement(Col, {\n          sm: true,\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this3.add(!isLike ? movie : movie.id);\n          },\n          variant: \"danger\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: isLike ? \"glyphicon glyphicon-minus\" : \"glyphicon glyphicon-plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }))))));\n      }));\n    }\n  }]);\n\n  return MovieList;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    movies: state.movies.movies,\n    page: null\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getMovies: function getMovies(page) {\n      return dispatch(_getMovies(page));\n    },\n    addFavorites: function addFavorites(id) {\n      return dispatch(_addFavorites(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieList);","map":{"version":3,"sources":["/Users/kaliguy7/Dev/leo/src/components/MovieList.js"],"names":["React","Component","Row","Col","Button","CardColumns","Card","getMovies","addFavorites","removeFavorites","connect","MovieList","state","movies","searchInfo","page","onBOttom","handleScroll","windowHeight","window","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","setState","setItem","movie","console","log","getItem","localStorage","cloneArr","JSON","parse","name","push","stringify","forceUpdate","map","item","index","id","splice","arr","props","addEventListener","removeEventListener","newProps","length","isFavor","find","isLike","backdrop_path","vote_average","overview","add","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Row, Col, Button, CardColumns, Card } from \"react-bootstrap\";\nimport \"../css/list.css\";\nimport { getMovies } from \"../actions\";\nimport { addFavorites, removeFavorites } from \"../actions/movieActions\";\n\nimport { connect } from \"react-redux\";\n\nclass MovieList extends Component {\n  state = {\n    movies: [],\n    searchInfo: {},\n    page: 1,\n    onBOttom: false\n  };\n  componentDidMount() {\n    this.props.getMovies(this.state.page);\n    window.addEventListener(\"scroll\", this.handleScroll);\n  }\n\n  handleScroll = () => {\n    const windowHeight =\n      \"innerHeight\" in window\n        ? window.innerHeight\n        : document.documentElement.offsetHeight;\n    const body = document.body;\n    const html = document.documentElement;\n    const docHeight = Math.max(\n      body.scrollHeight,\n      body.offsetHeight,\n      html.clientHeight,\n      html.scrollHeight,\n      html.offsetHeight\n    );\n    const windowBottom = windowHeight + window.pageYOffset;\n    if (windowBottom >= docHeight) {\n      this.setState({\n        onBOttom: true\n      });\n    } else {\n      this.setState({\n        onBOttom: false\n      });\n    }\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"scroll\", this.handleScroll);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (newProps.movies) {\n      this.setState({\n        movies: [...this.state.movies, ...newProps.movies],\n        page: this.state.page + 1,\n        onBOttom: false\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.onBOttom) {\n      this.props.getMovies(this.state.page);\n    }\n  }\n\n  setItem = (movie) => {\n    console.log(movie, '*******');\n    let getItem = localStorage.getItem('favourite');\n    if (getItem) {\n      let cloneArr = JSON.parse(getItem);\n      if (movie && movie.name) {\n        cloneArr.push(movie);\n        localStorage.setItem('favourite', JSON.stringify(cloneArr))\n        this.forceUpdate();\n      } else {\n        // let arr = [];\n        cloneArr.map((item, index) => {\n          if (item.id === movie) {\n            cloneArr.splice(index, 1)\n            localStorage.setItem('favourite', JSON.stringify(cloneArr))\n            this.forceUpdate();\n          }\n        })\n      }\n    }\n    else {\n      let arr = [movie];\n      localStorage.setItem('favourite', JSON.stringify(arr));\n\n      this.forceUpdate();\n    }\n  }\n\n  add(movie) {\n    let getItem = localStorage.getItem('AddLike');\n    if (getItem) {\n      let cloneArr = JSON.parse(getItem);\n      if (movie && movie.name) {\n        cloneArr.push(movie);\n        localStorage.setItem('AddLike', JSON.stringify(cloneArr))\n        this.forceUpdate();\n      } else {\n        cloneArr.map((item, index) => {\n          if (item.id === movie) {\n            cloneArr.splice(index, 1)\n            localStorage.setItem('AddLike', JSON.stringify(cloneArr))\n            this.forceUpdate();\n          }\n        })\n      }\n    }\n    else {\n      let arr = [movie];\n      localStorage.setItem('AddLike', JSON.stringify(arr));\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    const { movies, page, searchInfo } = this.state;\n    console.log(this.state);\n    if (this.props.movies.length === 0) {\n      return <h1>Loading...</h1>;\n    }\n\n    return (\n      <CardColumns id=\"card-columns\">\n        {movies.map((movie, index) => {\n          const isFavor = JSON.parse(localStorage.getItem('favourite')) ? JSON.parse(localStorage.getItem('favourite')).find(arr => arr.id === movie.id) : false\n          const isLike = JSON.parse(localStorage.getItem('AddLike')) ? JSON.parse(localStorage.getItem('AddLike')).find(arr => arr.id === movie.id) : false\n          // console.log(isFavor,\"lalalal\")\n          return (\n            <Card key={movie.id}>\n              <Card.Img\n                variant=\"top\"\n                src={`https://image.tmdb.org/t/p/w185${movie.backdrop_path}`}\n              />\n              <Card.Body>\n                <Card.Title>\n                  <h4>{movie.name}</h4>\n                  <h6>{movie.vote_average || \"No Rating\"} </h6>\n                </Card.Title>\n                <Card.Text>{movie.overview}</Card.Text>\n              </Card.Body>\n              <Card.Footer>\n                <Row>\n                  <Col sm>\n                    <Button onClick={() => this.setItem(!isFavor ? movie : movie.id)} variant=\"danger\">\n                      <span className={isFavor ? \"glyphicon glyphicon-heart-empty\" : \"glyphicon glyphicon-heart\"} />\n                    </Button>\n                  </Col>\n                  <Col sm />\n                  <Col sm align=\"right\">\n                    <Button onClick={() => this.add(!isLike ? movie : movie.id)} variant=\"danger\">\n                      <span className={isLike ? \"glyphicon glyphicon-minus\" : \"glyphicon glyphicon-plus\"} />\n                    </Button>\n                  </Col>\n                </Row>\n              </Card.Footer>\n            </Card>\n          )\n        }\n\n        )}\n      </CardColumns>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    movies: state.movies.movies,\n    page: null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getMovies: page => dispatch(getMovies(page)),\n    addFavorites: id => dispatch(addFavorites(id))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(MovieList);\n"]},"metadata":{},"sourceType":"module"}